<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        * {
            box-sizing: border-box;
        }
        
        html,
        body {
            height: 100vh;
            margin: 0;
            font-family: Arial, Helvetica, sans-serif;
            background: #FBBF23;
            background-image: url(/assets/img/lnbg.jpg);
            background-size: 100% 100%;
            background-repeat: no-repeat;
            background-position: center center;
            background-attachment: scroll;
        }
        
        .btn-container {
            height: 80px;
            position: relative;
        }
        
        .center {
            margin: 0;
            position: absolute;
            top: 85vh;
            left: 73vw;
            -ms-transform: translate(-50%, -50%);
            transform: translate(-40%, -50%);
        }
        
        .button {
            border: 1px solid #FFFF57;
            background: #FFFF57;
            background-image: linear-gradient(#FFFF57 60%, #FFF112 40%);
            border-radius: 3px;
            padding-left: 0.5rem;
            min-width: 14rem;
            height: 3.9rem;
            cursor: pointer;
        }
        
        @media only screen and (max-width: 1023px) {
            html,
            body {
                height: 100vh;
                margin: 0;
                font-family: Arial, Helvetica, sans-serif;
                background: #FBBF23;
                background-image: url(/assets/img/lnmobileBG.jpg);
                background-size: 100% 100%;
                background-repeat: no-repeat;
                background-position: center center;
            }
            .center {
                margin: 0;
                position: absolute;
                top: 90vh;
                left: 46vw;
                -ms-transform: translate(-50%, -50%);
                transform: translate(-40%, -50%);
            }
            .button {
                border: 1px solid #FFFF57;
                background: #FFFF57;
                background-image: linear-gradient(#FFFF57 60%, #FFF112 40%);
                border-radius: 3px;
                padding-left: 0.5rem;
                min-width: 10rem;
                height: 3.9rem;
                cursor: pointer;
            }
        }
    </style>
</head>
<script src="./lib/microapp.js"></script>
<script type="text/javascript">
    async function getPricePoints() {
        const msisdn = Ayoba.getMsisdn();
        // console.log(msisdn);
        let serviceIdTen = "526";
        let serviceIdFifty = "322";
        let selectedValue = document.querySelector('input[name="radio"]:checked').value;
        await fetch(`https://micro-app-be.herokuapp.com/api/v1/subscribe`, {
            method: 'POST',
            headers: {
                'cpid': 11,
                'x-token': 'NJ06A666-741F-484E-AEC9-8B91D2CP',
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                'msisdn': msisdn.toString(),
                'ServiceID': selectedValue === "10" ? serviceIdTen : selectedValue === "50" ? serviceIdFifty : serviceIdFifty,
                'ChannelID': "105"
            })
        }).then((data) => {
            return data.json();
        }).then((data) => {
            console.log(data)
            if (data.status === 400) {
                alert('Unable to subscribe, Try Later');
            }
            alert('Successful, Kindly accept Auto Renew')

        }).catch(function(error) {
            console.log('Looks like there was a problem: \n', error);
        });
    }
</script>

<body>
    <div class="btn-container">
        <div class="center">
            <a href="/assets/pricepoint.html"><button type="button" class="button"><h1 style="font-weight: 700; font-size: x-large;">ENTER</h1></button></a>
        </div>
    </div>
</body>

</html>